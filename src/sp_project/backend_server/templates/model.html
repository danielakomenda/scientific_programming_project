<!DOCTYPE html>
<html lang="en">
    {% extends "base.html" %}
    <head>
        {% block head %}{{ super() }}{% endblock %}
    </head>
    <body>
        {% block nav_bar %}{{ super() }}{% endblock %}
        {% block title %} Modelling {% endblock %}
        {% block main %}{{ super() }}{% endblock %}


        {% block content %}


        <div class="sub-page-text">On this page you can find Information about our Model-Preparation-Process.</div>


        <div class="subtitle">Feature-Preparation</div>
        <p class="info-text">
            In the table below you can see the Energy-Features we used for the Modelling-Process.
            The data originates from <a href="https://transparency.entsoe.eu/generation/r2/actualGenerationPerProductionType/show">entsoe.eu</a> as mentioned on the subpage "Historic Energy".
        </p>

        <div class="table">
            {{ energy_table_html }}
        </div>

        <p class="info-text">
            In the table below you can see the calculated Weather Features we used for the Modelling-Process.
            As mentioned in the subpage "Historic Weather" the data-source originates from <a href="wetter2.com">wetter2.com</a>.
        </p>
        <p class="info-text">
            They provide Rain-Data, so we could use the Rain-Data directly from our data-source.
            For the Wind-Energy, we calculated it from the cubed Wind-Speed-Data provided by wetter2.com as well.
            The Heating-Demand was calculated ax the negative deviation of the average temperature from 14°C.
            So if the average temperature in Switzerland was 12°C, the heating-demand would be 2°C, while 16°C would be 0°C.
        </p>
        <p class="info-text">
            The solar-power was calculated by the following formula: <img src="../../static/pictures/solar_angle.png" alt="solar-angle" width="300">.
        </p>
        <p class="info-text">
            We used a Jupyter-Notebook and the numpy-Library to calculate the Solar-Power above clouds as followed: <br>
            <img src="../../static/pictures/solarpower_aboveclouds.png" alt="solarpower above clouds" width="600">.
        </p>
        <p class="info-text">The used Solar-Power below clouds, was then calculated by multiplying the Solar-Power-Above-Clouds with the Cloud-Percentage provided by our data-source.
        </p>
        <div class="table">
            {{ weather_table_html }}
        </div>


        <div class="subtitle">Pre-Process</div>
        <p class="info-text">
        Before we started with the Modelling-Process we decided to do some analysis with a Regression-Plot to see, if there are some promising features to model.
        We used the seaborn-Library to plot all combination between our Input-Features (weather-calculations) and our Target-Features (energy-production).
        As you can see below, there are some combination that look related, like the solar-production and solar-power available.
        </p>
        <img id="regression" class="plot" src="../static/pictures/regression-overview.png">


        <div class="subtitle">Modelling</div>
        <p class="info-text">
            We decided to use a linear regression model, specifically the Partial Least Squares (PLS) algorithm. PLS is suitable for handling complex data with potential correlations, even without a necessary causal relationship.
            The algorithm identifies the most significant components in the data.
            In our case, we chose to utilize only the two most important components.
        </p>
        <p class="info-text">
            In the tables below, you can observe the x-weights and y-weights generated by the PLS algorithm.
            These weights are used by the model to determine the most influential components for fitting the data.
        </p>

        <div class="table">
            {{ x_weights_table_html }}
        </div>

        <div class="table">
            {{ y_weights_table_html }}
        </div>


        <div class="subtitle">Test the Model</div>
        <p class="info-text">
            We decided to test the model using the 2022 data, based on the dataset from 2021.
            Upon evaluation, it is evident that some features are predicted accurately, while others show a lack of reliability in our model.
        </p>

        <img id="modeltest" class="plot" src="../static/pictures/overlap.png">


        {% endblock %}


        {% block footer %}{{ super() }}{% endblock %}

    </body>
</html>